resources:
- name: sql-instance
  properties:
    databaseVersion: MYSQL_5_7
    labels:
      label-one: value-one
    region: us-central1
    settings:
      backupConfiguration:
        binaryLogEnabled: false
        pointInTimeRecoveryEnabled: false
        replicationLogArchivingEnabled: false
      ipConfiguration:
        ipv4Enabled: true
      locationPreference:
        zone: us-central1-a
      tier: db-n1-standard-1
  type: gcp-types/sqladmin-v1beta4:instances
- metadata:
    dependsOn:
    - sql-instance
  name: sql-user
  properties:
    host: '%'
    instance: sql-instance
    password: cGFzc3dvcmQ=
  type: gcp-types/sqladmin-v1beta4:users
- name: sql-instance-1
  properties:
    databaseVersion: MYSQL_8_0_31
    labels:
      label-one: value-one
    region: us-central1
    settings:
      backupConfiguration:
        binaryLogEnabled: false
        pointInTimeRecoveryEnabled: false
        replicationLogArchivingEnabled: false
      ipConfiguration:
        ipv4Enabled: true
      locationPreference:
        zone: us-central1-a
      tier: db-n1-standard-1
  type: gcp-types/sqladmin-v1beta4:instances
- metadata:
    dependsOn:
    - sql-instance-1
  name: sql-user-1
  properties:
    host: '%'
    instance: sql-instance-1
    password: cGFzc3dvcmQ=
    project: test-project-id
    type: BUILT_IN
    passwordPolicy:
      allowedFailedAttempts: 10
      passwordExpirationDuration: 86400s
      enableFailedAttemptsCheck: false
      enablePasswordVerification: false
  type: gcp-types/sqladmin-v1beta4:users
- metadata:
    dependsOn:
    - sql-instance
  name: sql-user-2
  properties:
    host: '%'
    instance: sql-instance
    password: cGFzc3dvcmQ=
  type: sqladmin.v1beta4.user
