resources:
- name: compute-address
  properties:
    region: us-west1
  type: compute.v1.address
- name: compute-network
  properties:
    autoCreateSubnetworks: false
    routingConfig:
      routingMode: REGIONAL
  type: compute.v1.network
- metadata:
    dependsOn:
    - compute-network
  name: compute-targetvpngateway
  properties:
    description: a regional target vpn gateway
    network: $(ref.compute-network.selfLink)
    region: us-west1
  type: compute.v1.targetVpnGateway
- metadata:
    dependsOn:
    - compute-targetvpngateway
    - compute-address
  name: compute-forwardingrule
  properties:
    IPAddress: $(ref.compute-address.selfLink)
    IPProtocol: ESP
    description: A regional forwarding rule
    region: us-west1
    target: $(ref.compute-targetvpngateway.selfLink)
  type: compute.v1.forwardingRule
