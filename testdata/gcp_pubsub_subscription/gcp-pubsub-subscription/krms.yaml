apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  labels:
    tag: dmv3-hackathon
  name: pubsub-topic
spec:
  resourceID: pubsub-topic
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: pubsub-dead-letter-topic
spec:
  resourceID: pubsub-dead-letter-topic
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubSubscription
metadata:
  name: pubsub-subscription-1
spec:
  topicRef:
    name: pubsub-topic
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubSubscription
metadata:
  name: pubsub-subscription-2
spec:
  ackDeadlineSeconds: 15
  deadLetterPolicy:
    deadLetterTopicRef:
      name: pubsub-dead-letter-topic
    maxDeliveryAttempts: 5
  filter: attributes.domain = "com"
  messageRetentionDuration: 86400s
  retainAckedMessages: false
  topicRef:
    name: pubsub-topic
